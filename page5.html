<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Page 5 - Album</title>
    <base target="contentFrame">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="bg">
    <section class="paperCard">
      <div class="scriptTitle">Happy Valentine's Day</div>

      <div id="album" class="albumWrap" aria-label="Album 3 foto">
        <!-- efek kamera -->
        <div class="flash" id="flash"></div>
        <div class="shutter" id="shutter">
          <div class="shutterTop"></div>
          <div class="shutterBottom"></div>
        </div>

        <!-- slide 1 -->
        <div class="slide active">
          <div class="photoFrame">
            <img src="assets/album1.jpg" alt="Album 1">
          </div>
        </div>

        <!-- slide 2 -->
        <div class="slide">
          <div class="photoFrame">
            <img src="assets/album2.jpg" alt="Album 2">
          </div>
        </div>

        <!-- slide 3 -->
        <div class="slide">
          <div class="photoFrame">
            <img src="assets/album3.jpg" alt="Album 3">
          </div>
        </div>
      </div>

      <div class="cameraBar">
        <div class="dots" id="dots">
          <div class="dot on"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>

        <div class="camBtns">
          <button class="camBtn" id="prevBtn" type="button">◀</button>
          <button class="camBtn" id="nextBtn" type="button">▶</button>
        </div>
      </div>

      <div class="proceedRow">
          <a class="btnOutlinePink" href="page4.html">BACK</a>
        <a class="btnOutlinePink" href="page6.html">LANJUT</a>
      </div>
    </section>
  </main>

  <!-- sound kamera -->
  <audio id="cameraSound" src="assets/camera.mp3" preload="auto"></audio>

  <script>
    const album = document.getElementById("album");
    const slides = Array.from(album.querySelectorAll(".slide"));
    const dotsWrap = document.getElementById("dots");
    const dots = Array.from(dotsWrap.querySelectorAll(".dot"));
    const flash = document.getElementById("flash");
    const shutter = document.getElementById("shutter");

    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    const cameraSound = document.getElementById("cameraSound");

    let idx = 0;

    function cameraFx(){
      flash.classList.remove("on");
      shutter.classList.remove("on");
      void flash.offsetWidth;
      void shutter.offsetWidth;
      flash.classList.add("on");
      shutter.classList.add("on");

      if(cameraSound){
        cameraSound.currentTime = 0;
        cameraSound.play().catch(() => {});
      }
    }

    function show(i){
      idx = (i + slides.length) % slides.length;
      slides.forEach((s, k) => s.classList.toggle("active", k === idx));
      dots.forEach((d, k) => d.classList.toggle("on", k === idx));
      cameraFx();
    }

    prevBtn.addEventListener("click", () => show(idx - 1));
    nextBtn.addEventListener("click", () => show(idx + 1));

    // swipe support
    let startX = null;
    album.addEventListener("pointerdown", (e) => {
      startX = e.clientX;
    });
    album.addEventListener("pointerup", (e) => {
      if(startX === null) return;
      const dx = e.clientX - startX;
      startX = null;
      if(Math.abs(dx) < 40) return;
      if(dx < 0) show(idx + 1);
      else show(idx - 1);
    });
  </script>
</body>
</html>
